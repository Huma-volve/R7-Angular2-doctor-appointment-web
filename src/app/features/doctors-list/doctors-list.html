<div class="container doctor-list">
  <!-- Header -->
  <div class="row header-bar align-items-center py-4">
    <div class="col-auto">
      <button
        class="btn btn-outline-secondary d-flex align-items-center gap-2"
        (click)="toggleSidebar()"
      >
        <i class="fas fa-filter"></i>
        <span>Filter</span>
      </button>
    </div>

    <div class="col">
      <div class="input-group">
        <input
          type="text"
          class="form-control search-input"
          placeholder="Search Doctors"
          [(ngModel)]="searchText"
          (ngModelChange)="applyFilters()"
        />
      </div>
    </div>

    <div class="col-auto">
      <button class="btn btn-outline-secondary d-flex align-items-center gap-2">
        <i class="fas fa-map-marker-alt"></i>
        <span>Map</span>
      </button>
    </div>
  </div>

  <!-- Main Content Area  -->
  <div class="main-content ">
    <!-- Sidebar  -->
    <div class="sidebar" [class.collapsed]="isSidebarCollapsed">
      <div class="sidebar-card card p-3 shadow-sm">
        <h5 class="mb-3">Filter Options</h5>

        <!-- Available Date Filter -->
        <div class="filter-section mb-3">
          <h6>Available Date</h6>
          @for (date of ['Today', 'Tomorrow']; track date) {
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              [id]="'date' + date"
              [value]="date"
              name="availableDate"
              [(ngModel)]="availableDateFilter"
              (change)="applyFilters()"
            />
            <label class="form-check-label" [for]="'date' + date">{{ date }}</label>
          </div>
          }
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="dateAny"
              [value]="null"
              name="availableDate"
              [(ngModel)]="availableDateFilter"
              (change)="applyFilters()"
            />
            <label class="form-check-label" for="dateAny">Any</label>
          </div>
        </div>

        <!-- Gender Filter -->
        <div class="filter-section mb-3">
          <h6>Gender</h6>
          <div class="btn-group w-100" role="group">
            <input
              type="radio"
              class="btn-check"
              name="gender"
              id="genderMale"
              value="Male"
              autocomplete="off"
              [(ngModel)]="genderFilter"
              (change)="applyFilters()"
            />
            <label class="btn btn-outline-primary rounded-3 mx-1" for="genderMale">Male</label>

            <input
              type="radio"
              class="btn-check"
              name="gender"
              id="genderFemale"
              value="Female"
              autocomplete="off"
              [(ngModel)]="genderFilter"
              (change)="applyFilters()"
            />
            <label class="btn btn-outline-primary rounded-3 mx-2" for="genderFemale">Female</label>
            <input
              type="radio"
              class="btn-check"
              name="gender"
              id="genderAny"
              [value]="null"
              autocomplete="off"
              [(ngModel)]="genderFilter"
              (change)="applyFilters()"
            />
          </div>
        </div>

        <!-- Consultation Type Filter  -->
        <div class="filter-section mb-3">
          <h6>Consultation Type</h6>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="consultationType"
              id="typeInclinic"
              value="In-clinic"
              [(ngModel)]="consultationTypeFilter"
              (change)="applyFilters()"
            />
            <label class="form-check-label" for="typeInclinic">In-clinic</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="consultationType"
              id="typeHomeVisit"
              value="Home Visit"
              [(ngModel)]="consultationTypeFilter"
              (change)="applyFilters()"
            />
            <label class="form-check-label" for="typeHomeVisit">Home Visit</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="consultationType"
              id="typeAnyConsultation"
              [value]="null"
              [(ngModel)]="consultationTypeFilter"
              (change)="applyFilters()"
            />
            <label class="form-check-label" for="typeAnyConsultation">Any</label>
          </div>
        </div>

        <!-- Sort Filter -->
        <div class="filter-section mb-3">
          <h6>Sort</h6>
          @for (sort of sortOptions; track sort.value) {
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              [id]="sort.value"
              [value]="sort.value"
              name="sortOptions"
              [(ngModel)]="sortFilter"
              (change)="applyFilters()"
            />
            <label class="form-check-label" [for]="sort.value">{{ sort.label }}</label>
          </div>
          }
        </div>
      </div>
    </div>

    <!-- Doctor List Area  -->
    <div class="doctor-list p-3">
      <h4 class="mb-3">Choose Specialties</h4>

      <!-- Specialties -->
      <div class="mb-4">
        <div class="pb-2">
          @for (specialty of specialties; track specialty.name) {
          <button
            class="btn second-color specialty-tag flex-shrink-0 mb-2 me-2"
            [ngClass]="{
              'btn-primary': isSpecialtySelected(specialty.name),
              'btn-outline-primary': !isSpecialtySelected(specialty.name)
            }"
            (click)="toggleSpecialty(specialty.name)"
          >
            <i class="fas {{ specialty.icon }} mb-1 pe-4 "></i>
            <span>{{ specialty.name }}</span>
          </button>
          }
        </div>
      </div>

      <!-- Doctor Cards -->
      <div class="doctor-cards g-4">
        @for (doctor of filteredDoctors; track doctor.id) {
        <div class="doctor-card-col">
          <div class="card doctor-card shadow-lg text-center">
            <div class="card-contant ">
              <div class="card-img">
              <img
                [src]="doctor.image"
                alt="{{ doctor.name }}"
                class="doctor-image"
              />
            </div>
            <div>
              <h5 class="card-title m-2">{{ doctor.name }}</h5>
              <p class="text-muted mb-1">{{ doctor.specialty }} | {{ doctor.hospital }}</p>
              <div class="d-flex justify-content-center align-items-center mb-2">
                <i class="fas fa-star text-warning me-1"></i>
                <span>{{ doctor.rating }}</span>
              </div>
              <p class="mb-1"><i class="far fa-clock me-2 "></i> {{ doctor.availableTime }}</p>

            </div>
            </div>

            <div class="card-body">
              <p class="d-flex justify-content-between mx-2 pt-2 border-top">
                <span>Price<span class="text-muted small">/hour</span></span>
                <strong class="text-danger">${{ doctor.price }}</strong>
              </p>
              <button class="btn-main w-100">Book appointment</button>
            </div>
          </div>
        </div>
        } @empty {
        <div class="col-12 text-center py-5">
          <p class="lead text-muted">No doctors found matching your criteria.</p>
        </div>
        }
      </div>

      <!-- Previous & Next -->
      <div class="d-flex justify-content-between mt-5">
        <button class="btn-main py-2 mb-4 ms-2">Previous page</button>
        <button class="btn-main py-2 mb-4">Next page</button>
      </div>
    </div>
  </div>
</div>
